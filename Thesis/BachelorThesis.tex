% Nejprve uvedeme tridu dokumentu s volbami
\pdfminorversion=7
\documentclass[czech,bachelor]{diploma}
% Dalsi doplnujici baliky maker
\usepackage[autostyle=true,czech=quotes]{csquotes} % korektni sazba uvozovek, podpora pro balik biblatex
\usepackage[backend=bibtex, style=iso-numeric, alldates=iso]{biblatex} % bibliografie
\usepackage{dcolumn} % sloupce tabulky s ciselnymi hodnotami
\usepackage{subfig} % makra pro "podobrazky" a "podtabulky"
\usepackage{dirtytalk}
\usepackage{enumitem}
\usepackage[dvipsnames]{xcolor}
\usepackage{bbding}
\usepackage{boldline}
\usepackage{newfloat}
\usepackage{caption}
\usepackage{dirtree}
\usepackage{mathtools}

% new enviroment for codes
\DeclareFloatingEnvironment[
    placement={!ht},
    name=Zdrojový kód,
    listname={Seznam zdrojových kódů}
]{code}

% minted
\usepackage[outputdir=out]{minted}
\renewcommand{\MintedPygmentize}{C:/Python311/Scripts/pygmentize}
\setminted[typescript]{
    frame=lines,
    framesep=2mm,
    baselinestretch=1.2,
    tabsize=4
}
\setminted[peg]{
    frame=lines,
    framesep=2mm,
    baselinestretch=1.2,
    tabsize=4
}
\setminted[html]{
    frame=lines,
    framesep=2mm,
    baselinestretch=1.2,
    tabsize=4
}
\usemintedstyle{emacs}
% end minted

\counterwithout{footnote}{chapter}

% Zadame pozadovane vstupy pro generovani titulnich stran. 
\ThesisAuthor{Dominik Kundra}

\ThesisSupervisor{Ing. Jakub Beránek}

\CzechThesisTitle{Vizualizace regulárních výrazů}

\EnglishThesisTitle{Regular Expression Visualization}

\SubmissionYear{2024}

\ThesisAssignmentFileName{ThesisSpecification_KUN0161.pdf}

% Pokud nechceme nikomu dekovat makro zapoznamkujeme.
\Acknowledgement{
    Chtěl bych poděkovat svému vedoucímu práce, Ing. Jakubovi Beránkovi, za ochotu, pomoc a za rychlou zpětnou vazbu při realizaci této práce.
}

\CzechAbstract{
    Tato práce se věnuje vizualizaci regulárních výrazů, slouží pro pochopení jejich fungování a k potencionálnímu odhalení chyb při jejich ladění.
    První část práce popisuje principy fungování regulárních výrazů, historii a jejich základní vzory.
    Druhá část srovnává existující nástroje, jejich možnosti a inspirace pro tuto práci. 
    Třetí část probírá specifikaci požadavků, zvolený návrh a použité technologie aplikace.
    Dále se detailněji zabývá implementací samotné aplikace, konkrétně zpracováním regulárních výrazů, vizualizací a rozšířením pro vývojové prostředí Visual Studio Code.
}

\CzechKeywords{vizualizace regulárních výrazů; vývojové prostředí Visual Studio Code}

\EnglishAbstract{
    This thesis focuses on visualization of regular expressions, serving a purpose for understanding their functioning and for potentional error detection while debugging them.
    First part of thesis describes functioning principles of regular expressions, history and their basic patterns.
    Second part compares existing tools, their options and inspirations for this thesis.
    Third part discusses specification of requirements, selected design and used technologies in application.
    Furthermore this part more focuses on implementation of the application alone, specifically about regular expression evaluation, visualization and extension for development enviroment Visual Studio Code.
}

\EnglishKeywords{visualization of regular expressions; development enviroment Visual Studio Code}

\AddAcronym{AST}{Abstract Syntax Tree}
\AddAcronym{NKA}{Nedeterministický konečný automat}
\AddAcronym{DKA}{Deterministický konečný automat}
\AddAcronym{TS}{TypeScript}
\AddAcronym{JS}{JavaScript}
\AddAcronym{Regex}{Regular expression (Regulární výraz)}
\AddAcronym{API}{Application Programming Interface}
\AddAcronym{HTML}{HyperText Markup Language}
\AddAcronym{CSS}{Cascading Style Sheets}
\AddAcronym{VSCode}{Visual Studio Code}
\AddAcronym{PCRE}{Perl-Compatible Regular Expressions}

\addbibresource{biblatex.bib}

% Novy druh tabulkoveho sloupce, ve kterem jsou cisla zarovnana podle desetinne carky 
\newcolumntype{d}[1]{D{,}{,}{#1}}


% Zacatek dokumentu
\begin{document}

% Nechame vysazet titulni strany.
\MakeTitlePages

% Jsou v praci obrazky? Pokud ano vysazime jejich seznam a odstrankujeme.
% Pokud ne smazeme nasledujici dve makra.
\listoffigures
\clearpage

% Kódy
\listofcode
\clearpage

% Jsou v praci tabulky? Pokud ano vysazime jejich seznam a odstrankujeme.
% Pokud ne smazeme nasledujici dve makra.
\listoftables
\clearpage

% A nasleduje text zaverecne prace.
% TODO: chapters
% TODO: check capital letters
% TODO: check bold texts if makes sense
% TODO: add citations
% TODO: explain how look-around could be achieved
% TODO: explain that only one match can be found / not implemented flags in regex
\input{Chapters/Introduction.tex}
\input{Chapters/Principle.tex}
\input{Chapters/ExistingApplications.tex}
\input{Chapters/ApplicationTechnology.tex}
\input{Chapters/Implementation1.tex}
\input{Chapters/Implementation2.tex}
\input{Chapters/Testing.tex}
\input{Chapters/Conclusion.tex}

% Seznam literatury
\printbibliography[title={Literatura}, heading=bibintoc]

% Prilohy
\appendix

\chapter{Sestavení a spuštění projektu}\label{sec:ProjectBuild}

Pro vlastní sestavení aplikace je potřeba mít nainstalovaný NodeJS společně s NPM.
Při vývoji jsem používal NodeJS verze 20.9.0 a NPM verze 10.2.1.
Avšak pro vlastní sestavení by měla stačit verze NodeJS 14.17 společně s NPM verzí 6.14.
Zároveň může být použité i novější verze. 
Pokud uživatel nemá NodeJS, lze jej nainstalovat ze stránky \textit{https://nodejs.org}, NPM je součástí instalace.
Lze použít i jiné balíčkové manažery místo NPM, ale v návodu na sestavení používám právě NPM.
Rozšíření bylo vyvíjeno pro VSCode verze 1.84.0, ale mělo by fungovat i na novějších verzích.

V příloze~\ref{sec:FileStructure} je ukázaná částečná adresářová struktura projektu.
Instalace probíhá v následujících krocích:

\begin{enumerate}
	\item Pro instalaci všech externích závislostí, v kořenovém adresáři se použije příkaz \texttt{\textbf{\textcolor{OliveGreen}{npm install}}}.
	\item K sestavení projektu slouží npm skript \texttt{\textbf{\textcolor{OliveGreen}{npm run build}}}.
	\item Pro vytvoření instalačního souboru rozšíření se použije příkaz \texttt{\textbf{\textcolor{OliveGreen}{npm run release}}}.
	\item Výsledné instalační soubory se nachází v \textit{/libraries/regex-visualizer-extension/release}, podle přílohy \ref{sec:FileStructure}.
\end{enumerate}

Všechny potřebné soubory pro lokální spuštění ve webovém prohlížeči se po přeložení nachází v adresáři \textit{/libraries/regex-visualization/dist}. 
Pro spuštění je poté potřeba mít jakýkoliv webový server, kvůli podpoře web workeru.

\section*{Výsledný instalační soubor}

Výsledným souborem pro VSCode rozšíření je soubor s příponou \textit{.vsix}.
Tyto soubory slouží pro lokální instalaci rozšíření.
Pro získání \textit{vsix} souboru slouží příkaz \textit{vsce}, který dokáže sjednotit všechny závislosti do jednoho výsledného souboru.

Pro instalaci rozšíření lze použít příkazovou paletu od VSCode.
Tu lze otevřít přímo ve vývojovém prostředí, pomocí zkratky \textbf{Shift + Command + P} pro Mac, nebo pomocí \textbf{Ctrl + Shift + P} pro Windows/Linux.
Po otevření příkazové palety, stačí zadat příkaz \textit{Extensions: Install from VSIX}.
Poté se otevře průzkumník souborů, kde stačí otevřít zvolený \textit{vsix} soubor, který se nainstaluje.

Po dokončení instalace si lze otevřít okno aplikace, a to napsáním \textit{RegexVisualizer: Open} do příkazové palety od VSCode.

\chapter{Adresářová struktura projektu}\label{sec:FileStructure}

\dirtree{%
.1 /\DTcomment{Kořenový adresář projektu}.
.2 libraries\DTcomment{Adresář vlastních knihoven}.
.3 regex-visualization\DTcomment{Vizualizační knihovna}.
.4 customTypes\DTcomment{Vlastní typy}.
.4 src\DTcomment{Adresář zdrojových kódů}.
.5 assets\DTcomment{Zdroje např. obrázky}.
.5 core\DTcomment{Logická část knihovny}.
.5 styles\DTcomment{Styly aplikace}.
.5 templates\DTcomment{HTML vzory}.
.3 regex-visualizer-extension\DTcomment{Knihovna rozšíření do VSCode}.
.4 release\DTcomment{Výsledné vydání aplikace}.
.4 src\DTcomment{Adresář zdrojových kódů}.
.5 handlers\DTcomment{VSCode handlers}.
.5 providers\DTcomment{VSCode providers}.
.5 web\DTcomment{Adresář pro práci s webview}.
.3 regexer\DTcomment{Knihovna pro zpracování regulárních výrazů}.
.4 \_\_tests\_\_\DTcomment{Kódy pro testování}.
.4 src\DTcomment{Adresář zdrojových kódů}.
.5 core\DTcomment{Logická část knihovny}.
.5 coreTypes\DTcomment{Vlastní typy}.
.5 exceptions\DTcomment{Výjimky}.
.5 structures\DTcomment{Různé stuktury}.
}

\chapter{Testovací data}\label{sec:TestingData}

Následující list testovacích dat obsahuje regulární výraz a testovací řetězce k danému výrazu.
Za každým řetězcem se nachází signalizace, zda je řetězec přijímaný korespondujícím regulárním výrazem dle standardu pro jazyk JavaScript.

\begin{enumerate}
    %NEW ITEM
    \item
    \noindent\textbf{Regulární výraz:}

    \texttt{\textasciicircum (\textbackslash + ?\textbackslash d\{3\})?( ?\textbackslash d\{3\})\{3\}\$}

    \noindent\textbf{Testovací řetězce:}

    \begin{enumerate}
        \item +420 123 456 789 \setlength\parindent{1em} \textcolor{OliveGreen}{\Checkmark} \label{itm:TD_1a}
        \item +420123456 \setlength\parindent{1em} \textcolor{Red}{\XSolid} \label{itm:TD_1b}
        \item 420 123 456 \setlength\parindent{1em} \textcolor{OliveGreen}{\Checkmark} \label{itm:TD_1c}
        \item +421420 123456 \setlength\parindent{1em} \textcolor{OliveGreen}{\Checkmark} \label{itm:TD_1d}
    \end{enumerate}


    %NEW ITEM
    \item
    \noindent\textbf{Regulární výraz:} 

    \texttt{a*\_}

    \noindent\textbf{Testovací řetězce:}

    \begin{enumerate}
        \item aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa\_ \setlength\parindent{1em} \textcolor{OliveGreen}{\Checkmark} \label{itm:TD_2a}
    \end{enumerate}


    %NEW ITEM
    \item 
    \noindent\textbf{Regulární výraz:} 

    \texttt{(?:ab(?<name>c)*)+\_}

    \noindent\textbf{Testovací řetězce:}

    \begin{enumerate}
        \item abcdabababccccabababababababccccccccc\_ \setlength\parindent{1em} \textcolor{OliveGreen}{\Checkmark} \label{itm:TD_3a}
    \end{enumerate}


    %NEW ITEM
    \item 
    \noindent\textbf{Regulární výraz:} 

    \texttt{(a|b|c)+(?:ab)+[a-z]\_}

    \noindent\textbf{Testovací řetězce:}

    \begin{enumerate}
        \item abcbbbcccbbccbbccbbababababgjgrehjb\_ \setlength\parindent{1em} \textcolor{Red}{\XSolid} \label{itm:TD_4a}
    \end{enumerate}


    %NEW ITEM
    \item 
    \noindent\textbf{Regulární výraz:} 

    \texttt{\textasciicircum (a\{2,\}|b\{3\}|(x+))\{3,9\}\$}

    \noindent\textbf{Testovací řetězce:}

    \begin{enumerate}
        \item aaxxxxxxxxxxxxbbbxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxaaaaaabbb \setlength\parindent{1em} \textcolor{OliveGreen}{\Checkmark} \label{itm:TD_5a}
        \item aaaxxaxx \setlength\parindent{1em} \textcolor{Red}{\XSolid}
        \item aaaxxxx \setlength\parindent{1em} \textcolor{OliveGreen}{\Checkmark}
        \item axxxxxxbxxxxxaxxxxxxbxxb \setlength\parindent{1em} \textcolor{Red}{\XSolid}
    \end{enumerate}


    %NEW ITEM
    \item 
    \noindent\textbf{Regulární výraz:} 
    
    \texttt{((a|b|()+)*|a|b|)+}

    \noindent\textbf{Testovací řetězce:}

    \begin{enumerate}
        \item \parbox[t]{14cm}{ababababababababababababbbbabababbbabababababababababbababababababbbbab\-aba \setlength\parindent{1em} \textcolor{OliveGreen}{\Checkmark}} \label{itm:TD_6a}
        \item a \setlength\parindent{1em} \textcolor{OliveGreen}{\Checkmark}
    \end{enumerate}


    %NEW ITEM
    \item 
    \noindent\textbf{Regulární výraz:} 

    \texttt{(ab(c)*)+\_}
    
    \noindent\textbf{Testovací řetězce:}

    \begin{enumerate}
        \item \parbox[t]{14cm}{abcabcabcccccccabababababccccabcabcabcccccccabababababccccabcabcabcccccccaba\-babababccccabcabcabcccccccabababababccccabcabcabcccccccabababababccccabcabca\-bcccccccabababababcccc\_ \setlength\parindent{1em} \textcolor{OliveGreen}{\Checkmark}} \label{itm:TD_7a}
        \item \parbox[t]{14cm}{abcabcabcccccccabababababccccabcabcabcccccccabababababccccabcabcabcccccccaba\-babababccccabcabcabcccccccabababababccccabcabcabcccccccabababababccccabcabca\-bcccccccabababababcccc \setlength\parindent{1em} \textcolor{Red}{\XSolid}} \label{itm:TD_7b}
    \end{enumerate}
\end{enumerate}

% Priloha vlozena primo do hlavniho LaTeX souboru. Ne vsechny prilohy je nutne mit ve zvlastnich souborech.
% \chapter{Dlouhý zdrojový kód}

\end{document}
